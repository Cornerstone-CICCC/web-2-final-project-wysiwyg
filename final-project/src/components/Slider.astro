---
import Testimonial from "./Testimonial.astro";
import ArrowLeft from "../assets/icons/arrow-left.svg";
import ArrowRight from "../assets/icons/arrow-right.svg";
// import Swiper styles
import "swiper/swiper-bundle.css";
import "swiper/css/navigation";
---

<div class="mySwiper">
  <div class="swiper">
    <div class="swiper-wrapper">
      <!-- Slides -->
      <div class="swiper-slide">
        <Testimonial />
      </div>
      <div class="swiper-slide">
        <Testimonial />
      </div>
      <div class="swiper-slide">
        <Testimonial />
      </div>
      <div class="swiper-slide">
        <Testimonial />
      </div>
    </div>
  </div>
  <!-- If we need navigation buttons -->
  <button
    class="swiper-button-prev"
    style={{ backgroundImage: `url(${ArrowLeft.src})` }}></button>
  <button
    class="swiper-button-next"
    style={{ backgroundImage: `url(${ArrowRight.src})` }}
    }></button>
  <div class="swiper-pagination"></div>
</div>

<script>
  import Swiper from "swiper";
  import { Navigation, Pagination } from "swiper/modules";
  Swiper.use([Navigation, Pagination]);
  const swiper = new Swiper(".swiper", {
    direction: "horizontal",
    slidesPerView: 1,
    spaceBetween: 30,
    breakpoints: {
      768: {
        slidesPerView: 2,
        spaceBetween: 30,
      },
      992: {
        slidesPerView: 3,
        spaceBetween: 30,
      },
    },
    pagination: {
      enabled: true,
      el: ".swiper-pagination",
      clickable: true,
    },
  });

  swiper.on("resize", function () {
    console.log({ swiper });
  });

  // register navigation buttons
  document
    .querySelector(".swiper-button-next")
    ?.addEventListener("click", function () {
      swiper.slideNext();
    });
  document
    .querySelector(".swiper-button-prev")
    ?.addEventListener("click", function () {
      swiper.slidePrev();
    });
</script>

<style>
  :root {
    --swiper-theme-color: #000;
  }
  .mySwiper {
    position: relative;
    height: 400px;
    padding: 0.5rem;
    margin-bottom: 4rem;
  }
  .swiper {
    width: 100%;
    height: 100%;
  }

  .swiper-slide {
    text-align: center;
    background: #fff;
  }

  .swiper-slide img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .swiper-button-next,
  .swiper-button-prev {
    border: 1px solid #000;
    border-radius: 50%;
    width: 48px;
    height: 48px;
    color: black;
    padding: 1.3rem;
    background-color: #fff;
    background-repeat: no-repeat;
    background-size: 16px auto;
    background-position: center;
  }

  .swiper-button-next {
    margin-right: -1.5rem;
  }
  .swiper-button-prev {
    margin-left: -1.5rem;
  }

  .swiper-button-next::after,
  .swiper-button-prev::after {
    display: none;
  }

  .swiper-pagination {
    margin-bottom: -3rem;
  }

  @media screen and (min-width: 768px) {
    .swiper-button-next,
    .swiper-button-prev {
      width: 48px;
      height: 48px;
    }
  }
</style>
